# functions - collection of things to do for folsom installation

# Update Ubuntu
folsom_update() {
    apt-get update
    apt-get upgrade -y
}

# Disable ipv6
folsom_disable_ipv6() {
    cat > /etc/hosts<<EOF
127.0.0.1   localhost

# The following lines are desirable for IPv6 capable hosts
# ::1     ip6-localhost ip6-loopback
# fe00::0 ip6-localnet
# ff00::0 ip6-mcastprefix
# ff02::1 ip6-allnodes
# ff02::2 ip6-allrouters
EOF
    echo 'net.ipv6.conf.all.disable_ipv6 = 1' >> /etc/sysctl.conf
}

folsom_install_common_pkg() {
    apt-get install -y ntp python-mysqldb python-memcache
}

folsom_set_mysql_rootpass() {
#MYSQL_PASS=nova
cat <<MYSQL_DEBCONF | sudo debconf-set-selections
mysql-server-5.5 mysql-server/root_password password $MYSQL_PASS
mysql-server-5.5 mysql-server/root_password_again password $MYSQL_PASS
mysql-server-5.5 mysql-server/start_on_boot boolean true
MYSQL_DEBCONF    
}
